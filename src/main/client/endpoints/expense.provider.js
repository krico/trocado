/**
 * Generated by endpoints-angular-client-generator (version 0.0.1-6)
 * Arguments:
 *   endpoints-angular-client-generator -s -d /Users/krico/Projects/trocado/target/generated-sources/appengine-endpoints/WEB-INF/expense-v1-rest.discovery -o /Users/krico/Projects/trocado/src/main/client/endpoints
 */
/*global angular*/
(function (angular) {
    'use strict';
    angular.module('expense.endpoint').provider('Expense', ExpenseProvider);

    function ExpenseProvider() {
        var provider = this;
        provider.config = {
            apiRoot: 'https://${app.id}.appspot.com/_ah/api/expense/v1/',
            defaultParameters: {}
        };
        provider.apiRoot = function (v) {
            if (angular.isDefined(v)) {
                provider.config.apiRoot = v;
            }
            return provider.config.apiRoot;
        };
        provider.defaultParameters = function (v) {
            if (angular.isDefined(v)) {
                provider.config.defaultParameters = v;
            }
            return provider.config.defaultParameters;
        };
        provider.apiPath = function (path) {
            return provider.config.apiRoot + path;
        };
        provider.setApiKey = function (key) {
            provider.config.defaultParameters.key = key;
        };
        provider.parameters = function (params) {
            return angular.extend(params, provider.config.defaultParameters);
        };
        provider.responseTransformer = function (defaults, transform) {
            defaults = angular.isArray(defaults) ? defaults : [defaults];
            if (angular.isFunction(transform)) return defaults.concat(transform);
            else return defaults;
        };

        function Category(data) {
            this.category = data.category;
        }

        function Expense(data) {
            this.amount = data.amount;
            this.created = data.created ? new Date(data.created) : null;
            this.date = data.date ? new Date(data.date) : null;
            this.description = data.description;
            this.id = data.id;
            this.modified = data.modified ? new Date(data.modified) : null;
            this.origin = data.origin ? new Category(data.origin) : null;
        }

        function ExpenseCollection(data) {
            this.items = data.items ? data.items.map(mapExpense) : [];

            function mapExpense(v) {
                return new Expense(v);
            }
        }

        function UploadResult(data) {
            this.id = data.id;
            this.lastModified = data.lastModified;
            this.name = data.name;
            this.size = data.size;
            this.type = data.type;
        }
        provider.$get = ['$http', function ($http) {
            var svc = {
                batch: batch,
                delete: _delete,
                get: get,
                patch: patch,
                query: query,
                save: save,
                update: update
            };

            function batch(resource) {
                return $http({
                    method: 'PUT',
                    data: resource,
                    url: provider.apiPath('expenses'),
                    params: provider.parameters({}),
                    transformResponse: provider.responseTransformer($http.defaults.transformResponse, function (data) {
                        return new ExpenseCollection(data);
                    })
                });
            }

            function _delete(id) {
                return $http({
                    method: 'DELETE',
                    url: provider.apiPath('expenses/' + id + ''),
                    params: provider.parameters({})
                });
            }

            function get(id) {
                return $http({
                    method: 'GET',
                    url: provider.apiPath('expenses/' + id + ''),
                    params: provider.parameters({}),
                    transformResponse: provider.responseTransformer($http.defaults.transformResponse, function (data) {
                        return new Expense(data);
                    })
                });
            }

            function patch(request, id) {
                return $http({
                    method: 'PATCH',
                    data: request,
                    url: provider.apiPath('expenses/' + id + ''),
                    params: provider.parameters({}),
                    transformResponse: provider.responseTransformer($http.defaults.transformResponse, function (data) {
                        return new Expense(data);
                    })
                });
            }

            function query(limit, offset) {
                return $http({
                    method: 'GET',
                    url: provider.apiPath('expenses'),
                    params: provider.parameters({
                        limit: limit,
                        offset: offset
                    }),
                    transformResponse: provider.responseTransformer($http.defaults.transformResponse, function (data) {
                        return new ExpenseCollection(data);
                    })
                });
            }

            function save(resource) {
                return $http({
                    method: 'POST',
                    data: resource,
                    url: provider.apiPath('expenses'),
                    params: provider.parameters({}),
                    transformResponse: provider.responseTransformer($http.defaults.transformResponse, function (data) {
                        return new Expense(data);
                    })
                });
            }

            function update(resource, id) {
                return $http({
                    method: 'PUT',
                    data: resource,
                    url: provider.apiPath('expenses/' + id + ''),
                    params: provider.parameters({}),
                    transformResponse: provider.responseTransformer($http.defaults.transformResponse, function (data) {
                        return new Expense(data);
                    })
                });
            }
            return svc;
        }];
    }
}(angular));
