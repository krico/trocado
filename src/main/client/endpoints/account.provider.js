/**
 * Generated by endpoints-angular-client-generator (version 0.0.1-6)
 * Arguments:
 *   endpoints-angular-client-generator -s -d /Users/krico/Projects/trocado/target/generated-sources/appengine-endpoints/WEB-INF/account-v1-rest.discovery -o /Users/krico/Projects/trocado/src/main/client/endpoints
 */
/*global angular*/
(function (angular) {
    'use strict';
    angular.module('account.endpoint').provider('Account', AccountProvider);

    function AccountProvider() {
        var provider = this;
        provider.config = {
            apiRoot: 'https://${app.id}.appspot.com/_ah/api/account/v1/',
            defaultParameters: {}
        };
        provider.apiRoot = function (v) {
            if (angular.isDefined(v)) {
                provider.config.apiRoot = v;
            }
            return provider.config.apiRoot;
        };
        provider.defaultParameters = function (v) {
            if (angular.isDefined(v)) {
                provider.config.defaultParameters = v;
            }
            return provider.config.defaultParameters;
        };
        provider.apiPath = function (path) {
            return provider.config.apiRoot + path;
        };
        provider.setApiKey = function (key) {
            provider.config.defaultParameters.key = key;
        };
        provider.parameters = function (params) {
            return angular.extend(params, provider.config.defaultParameters);
        };
        provider.responseTransformer = function (defaults, transform) {
            defaults = angular.isArray(defaults) ? defaults : [defaults];
            if (angular.isFunction(transform)) return defaults.concat(transform);
            else return defaults;
        };

        function Account(data) {
            this.id = data.id;
        }

        function AccountCollection(data) {
            this.items = data.items ? data.items.map(mapAccount) : [];

            function mapAccount(v) {
                return new Account(v);
            }
        }
        provider.$get = ['$http', function ($http) {
            var svc = {
                delete: _delete,
                get: get,
                patch: patch,
                query: query,
                save: save,
                update: update
            };

            function _delete(id) {
                return $http({
                    method: 'DELETE',
                    url: provider.apiPath('accounts/' + id + ''),
                    params: provider.parameters({})
                });
            }

            function get(id) {
                return $http({
                    method: 'GET',
                    url: provider.apiPath('accounts/' + id + ''),
                    params: provider.parameters({}),
                    transformResponse: provider.responseTransformer($http.defaults.transformResponse, function (data) {
                        return new Account(data);
                    })
                });
            }

            function patch(request, id) {
                return $http({
                    method: 'PATCH',
                    data: request,
                    url: provider.apiPath('accounts/' + id + ''),
                    params: provider.parameters({}),
                    transformResponse: provider.responseTransformer($http.defaults.transformResponse, function (data) {
                        return new Account(data);
                    })
                });
            }

            function query() {
                return $http({
                    method: 'GET',
                    url: provider.apiPath('accounts'),
                    params: provider.parameters({}),
                    transformResponse: provider.responseTransformer($http.defaults.transformResponse, function (data) {
                        return new AccountCollection(data);
                    })
                });
            }

            function save(resource) {
                return $http({
                    method: 'POST',
                    data: resource,
                    url: provider.apiPath('accounts'),
                    params: provider.parameters({}),
                    transformResponse: provider.responseTransformer($http.defaults.transformResponse, function (data) {
                        return new Account(data);
                    })
                });
            }

            function update(resource, id) {
                return $http({
                    method: 'PUT',
                    data: resource,
                    url: provider.apiPath('accounts/' + id + ''),
                    params: provider.parameters({}),
                    transformResponse: provider.responseTransformer($http.defaults.transformResponse, function (data) {
                        return new Account(data);
                    })
                });
            }
            return svc;
        }];
    }
}(angular));
