/**
 * Generated by endpoints-angular-client-generator (version 0.0.1-6)
 * Arguments:
 *   endpoints-angular-client-generator -s -d /Users/krico/Projects/trocado/target/generated-sources/appengine-endpoints/WEB-INF/upload-v1-rest.discovery -o /Users/krico/Projects/trocado/src/main/client/endpoints
 */
/*global angular*/
(function (angular) {
    'use strict';
    angular.module('upload.endpoint').provider('Upload', UploadProvider);

    function UploadProvider() {
        var provider = this;
        provider.config = {
            apiRoot: 'https://${app.id}.appspot.com/_ah/api/upload/v1/',
            defaultParameters: {}
        };
        provider.apiRoot = function (v) {
            if (angular.isDefined(v)) {
                provider.config.apiRoot = v;
            }
            return provider.config.apiRoot;
        };
        provider.defaultParameters = function (v) {
            if (angular.isDefined(v)) {
                provider.config.defaultParameters = v;
            }
            return provider.config.defaultParameters;
        };
        provider.apiPath = function (path) {
            return provider.config.apiRoot + path;
        };
        provider.setApiKey = function (key) {
            provider.config.defaultParameters.key = key;
        };
        provider.parameters = function (params) {
            return angular.extend(params, provider.config.defaultParameters);
        };
        provider.responseTransformer = function (defaults, transform) {
            defaults = angular.isArray(defaults) ? defaults : [defaults];
            if (angular.isFunction(transform)) return defaults.concat(transform);
            else return defaults;
        };

        function Upload(data) {
            this.base64Data = data.base64Data;
            this.lastModified = data.lastModified;
            this.name = data.name;
            this.size = data.size;
            this.type = data.type;
        }

        function UploadResult(data) {
            this.id = data.id;
            this.lastModified = data.lastModified;
            this.name = data.name;
            this.size = data.size;
            this.type = data.type;
        }
        provider.$get = ['$http', function ($http) {
            var svc = {
                get: get,
                save: save
            };

            function get(id) {
                return $http({
                    method: 'GET',
                    url: provider.apiPath('uploads/' + id + ''),
                    params: provider.parameters({}),
                    transformResponse: provider.responseTransformer($http.defaults.transformResponse, function (data) {
                        return new Upload(data);
                    })
                });
            }

            function save(resource) {
                return $http({
                    method: 'POST',
                    data: resource,
                    url: provider.apiPath('uploads'),
                    params: provider.parameters({}),
                    transformResponse: provider.responseTransformer($http.defaults.transformResponse, function (data) {
                        return new UploadResult(data);
                    })
                });
            }
            return svc;
        }];
    }
}(angular));
